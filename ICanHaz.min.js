(function(){var p,t=Object.prototype.toString;Array.isArray=Array.isArray||function(a){return"[object Array]"==t.call(a)};var q=String.prototype.trim,h;if(q)h=function(a){return null==a?"":q.call(a)};else{var j,m;/\S/.test("\u00a0")?(j=/^[\s\xA0]+/,m=/[\s\xA0]+$/):(j=/^\s+/,m=/\s+$/);h=function(a){return null==a?"":a.toString().replace(j,"").replace(m,"")}}var u={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},r={},s=function(){};s.prototype={otag:"{{",ctag:"}}",pragmas:{},buffer:[],pragmas_implemented:{"IMPLICIT-ITERATOR":!0},
context:{},render:function(a,c,b,d){d||(this.context=c,this.buffer=[]);if(this.includes("",a)){a=this.render_pragmas(a);var e=this.render_section(a,c,b);!1===e&&(e=this.render_tags(a,c,b,d));if(d)return e;this.sendLines(e)}else{if(d)return a;this.send(a)}},send:function(a){""!==a&&this.buffer.push(a)},sendLines:function(a){if(a){a=a.split("\n");for(var c=0;c<a.length;c++)this.send(a[c])}},render_pragmas:function(a){if(!this.includes("%",a))return a;var c=this,b=this.getCachedRegex("render_pragmas",
function(a,c){return RegExp(a+"%([\\w-]+) ?([\\w]+=[\\w]+)?"+c,"g")});return a.replace(b,function(a,b,f){if(!c.pragmas_implemented[b])throw{message:"This implementation of mustache doesn't understand the '"+b+"' pragma"};c.pragmas[b]={};f&&(a=f.split("="),c.pragmas[b][a[0]]=a[1]);return""})},render_partial:function(a,c,b){a=h(a);if(!b||void 0===b[a])throw{message:"unknown_partial '"+a+"'"};return!c||"object"!=typeof c[a]?this.render(b[a],c,b,!0):this.render(b[a],c[a],b,!0)},render_section:function(a,
c,b){if(!this.includes("#",a)&&!this.includes("^",a))return!1;var d=this,e=this.getCachedRegex("render_section",function(a,b){return RegExp("^([\\s\\S]*?)"+a+"(\\^|\\#)\\s*(.+)\\s*"+b+"\n*([\\s\\S]*?)"+a+"\\/\\s*\\3\\s*"+b+"\\s*([\\s\\S]*)$","g")});return a.replace(e,function(a,e,f,g,k,l){a=e?d.render_tags(e,c,b,!0):"";l=l?d.render(l,c,b,!0):"";var n;g=d.find(g,c);"^"===f?n=!g||Array.isArray(g)&&0===g.length?d.render(k,c,b,!0):"":"#"===f&&(n=Array.isArray(g)?d.map(g,function(a){return d.render(k,
d.create_context(a),b,!0)}).join(""):d.is_object(g)?d.render(k,d.create_context(g),b,!0):"function"==typeof g?g.call(c,k,function(a){return d.render(a,c,b,!0)}):g?d.render(k,c,b,!0):"");return a+n+l})},render_tags:function(a,c,b,d){var e=this,f=function(){return e.getCachedRegex("render_tags",function(a,b){return RegExp(a+"(=|!|>|&|\\{|%)?([^#\\^]+?)\\1?"+b+"+","g")})},h=f(),j=function(a,d,g){switch(d){case "!":return"";case "=":return e.set_delimiters(g),h=f(),"";case ">":return e.render_partial(g,
c,b);case "{":case "&":return e.find(g,c);default:return a=e.find(g,c),String(a).replace(/&(?!\w+;)|[<>"']/g,function(a){return u[a]||a})}};a=a.split("\n");for(var g=0;g<a.length;g++)a[g]=a[g].replace(h,j,this),d||this.send(a[g]);if(d)return a.join("\n")},set_delimiters:function(a){a=a.split(" ");this.otag=this.escape_regex(a[0]);this.ctag=this.escape_regex(a[1])},escape_regex:function(a){arguments.callee.sRE||(arguments.callee.sRE=RegExp("(\\/|\\.|\\*|\\+|\\?|\\||\\(|\\)|\\[|\\]|\\{|\\}|\\\\)","g"));
return a.replace(arguments.callee.sRE,"\\$1")},find:function(a,c){a=h(a);var b;if(a.match(/([a-z_]+)\./ig)){var d=this.walk_context(a,c);(!1===d||0===d||d)&&(b=d)}else!1===c[a]||0===c[a]||c[a]?b=c[a]:(!1===this.context[a]||0===this.context[a]||this.context[a])&&(b=this.context[a]);return"function"==typeof b?b.apply(c):void 0!==b?b:""},walk_context:function(a,c){for(var b=a.split("."),d=void 0!=c[b[0]]?c:this.context,e=d[b.shift()];void 0!=e&&0<b.length;)d=e,e=e[b.shift()];return"function"==typeof e?
e.apply(d):e},includes:function(a,c){return-1!=c.indexOf(this.otag+a)},create_context:function(a){if(this.is_object(a))return a;var c=".";this.pragmas["IMPLICIT-ITERATOR"]&&(c=this.pragmas["IMPLICIT-ITERATOR"].iterator);var b={};b[c]=a;return b},is_object:function(a){return a&&"object"==typeof a},map:function(a,c){if("function"==typeof a.map)return a.map(c);for(var b=[],d=a.length,e=0;e<d;e++)b.push(c(a[e]));return b},getCachedRegex:function(a,c){var b=r[this.otag];b||(b=r[this.otag]={});var d=b[this.ctag];
d||(d=b[this.ctag]={});(b=d[a])||(b=d[a]=c(this.otag,this.ctag));return b}};p={name:"mustache.js",version:"0.4.0",to_html:function(a,c,b,d){var e=new s;d&&(e.send=d);e.render(a,c||{},b);if(!d)return e.buffer.join("\n")}};var f={VERSION:"0.10.1",templates:{},$:"undefined"!==typeof window?window.jQuery||window.Zepto||null:null,addTemplate:function(a,c){if("object"===typeof a)for(var b in a)this.addTemplate(b,a[b]);else f[a]?console.error("Invalid name: "+a+"."):f.templates[a]?console.error('Template "'+
a+'  " exists'):(f.templates[a]=c,f[a]=function(b,c){b=b||{};var h=p.to_html(f.templates[a],b,f.templates);return f.$&&!c?f.$(h):h})},clearAll:function(){for(var a in f.templates)delete f[a];f.templates={}},refresh:function(){f.clearAll();f.grabTemplates()},grabTemplates:function(){var a,c,b=document.getElementsByTagName("script"),d,e=[];a=0;for(c=b.length;a<c;a++)if((d=b[a])&&d.innerHTML&&d.id&&("text/html"===d.type||"text/x-icanhaz"===d.type))f.addTemplate(d.id,"".trim?d.innerHTML.trim():d.innerHTML.replace(/^\s+/,
"").replace(/\s+$/,"")),e.unshift(d);a=0;for(c=e.length;a<c;a++)e[a].parentNode.removeChild(e[a])}};"undefined"!==typeof require?module.exports=f:window.ich=f;"undefined"!==typeof document&&(f.$?f.$(function(){f.grabTemplates()}):document.addEventListener("DOMContentLoaded",function(){f.grabTemplates()},!0))})();
